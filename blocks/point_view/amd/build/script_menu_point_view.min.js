define(["jquery","core/ajax","core/notification"],function(a,b,c){return{init:function(d){var e=parseInt(d.userid),f=d.courseid,g=b.call([{methodname:"block_point_view_get_database",args:{userid:e,courseid:f},fail:c.exception}]);a.when(g[0]).done(function(b){function c(b){e[b.data.id]?(a(".row_module"+b.data.id+"_details").css({display:"none"}),a(".row_module"+b.data.id+" .c6").html("+"),e[b.data.id]=!1):(a(".row_module"+b.data.id+"_details").css({display:""}),a(".row_module"+b.data.id+" .c6").html("-"),e[b.data.id]=!0)}var d=[];b.forEach(function(a){d.push(parseInt(a.cmid))});var e=[];a(function(){d.forEach(function(b){e[b]=!1,a(".row_module"+b+"_details").css({display:"none"}),a(".row_module"+b+" .c6").click({id:b},c),[2,3,4].forEach(function(c){"0"===a(".row_module"+b+" .c"+c+" .voteInt").text()&&a(".row_module"+b+" .c"+c+" .overview_img").css({"-webkit-filter":"grayscale(100%)",filter:"grayscale(100%)"})})});var b=!1;a(".voteInt").css({display:"none"}),a(".c2, .c3, .c4").click(function(){b?(a(".votePercent").css({display:""}),a(".voteInt").css({display:"none"}),b=!1):(a(".voteInt").css({display:""}),a(".votePercent").css({display:"none"}),b=!0)}).mouseout(function(){a(this).css({cursor:"pointer"})})})})}}});